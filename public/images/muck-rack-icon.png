"use client";

import { useEffect, useState } from "react";
import { motion } from "framer-motion";
import { Check, ChevronRight, Star, Mail, Sparkles, Shield, Zap, Users, MailCheck, BookHeart, TrendingUp, Award, Play, MessageCircle, Calendar, BarChart3 } from "lucide-react";
import { Button } from "@/components/ui/button";
import { Card } from "@/components/ui/card";
import { Input } from "@/components/ui/input";
import { Badge } from "@/components/ui/badge";

const DownloadLogo = () => {
  const [downloaded, setDownloaded] = useState(false);

  const handleDownload = async () => {
    const response = await fetch("https://muck-rack-media.s3.amazonaws.com/logos/muckrack-black.svg");
    const blob = await response.blob();
    const url = URL.createObjectURL(blob);
    const link = document.createElement("a");
    link.href = url;
    link.download = "muck-rack-logo.svg";
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
    URL.revokeObjectURL(url);
    setDownloaded(true);
  };

  useEffect(() => {
    // Track download
    const analytics = {
      event: 'logo_download',
      timestamp: new Date().toISOString(),
      downloaded: true
    };
    console.log('Analytics event:', analytics);
  }, [downloaded]);

  return (
    <div className="flex items-center justify-center p-4">
      <motion.div
        whileHover={{ scale: 1.02 }}
        transition={{ duration: 0.2 }}
      >
        <Button 
          size="lg"
          variant="outline"
          onClick={handleDownload}
          className="gap-2 bg-white border-2 border-gray-300 hover:border-purple-500 hover:bg-purple-50 transition-all duration-300"
        >
          {downloaded ? (
            <>
              <Check className="w-4 h-4 text-green-600" />
              Downloaded
            </>
          ) : (
            <>
              <Mail className="w-4 h-4" />
              Download Muck Rack Logo
            </>
          )}
        </Button>
      </motion.div>
    </div>
  );
};

const PricingCard = ({ plan, price, features, popular = false }: { plan: string; price: string; features: string[]; popular?: boolean }) => (
  <motion.div
    initial={{ opacity: 0, y: 20 }}
    animate={{ opacity: 1, y: 0 }}
    transition={{ duration: 0.3 }}
    className="relative"
  >
    <Card className={`p-8 rounded-2xl border-2 ${popular ? 'border-purple-500 shadow-lg' : 'border-gray-200'}`}>
      {popular && (
        <Badge className="absolute -top-3 left-4 bg-purple-500 text-white">
          Most Popular
        </Badge>
      )}
      <div className="text-center">
        <h3 className="text-2xl font-bold mb-2">{plan}</h3>
        <div className="text-4xl font-bold mb-4">
          ${price}
          <span className="text-lg text-gray-600">/month</span>
        </div>
        <Button 
          className={`w-full ${popular ? 'bg-purple-500 hover:bg-purple-600' : 'bg-gray-900 hover:bg-gray-800'}`}
        >
          Get Started
        </Button>
      </div>
      <ul className="mt-6 space-y-3">
        {features.map((feature, index) => (
          <li key={index} className="flex items-start gap-2">
            <Check className="w-5 h-5 text-green-500 mt-0.5" />
            <span className="text-gray-700">{feature}</span>
          </li>
        ))}
      </ul>
    </Card>
  </motion.div>
);

export default function MuckRackLandingPage() {
  const [email, setEmail] = useState("");
  const [hoveredFeature, setHoveredFeature] = useState<string | null>(null);

  const features = [
    {
      icon: Sparkles,
      title: "AI Email Drafts",
      description: "Generate personalized pitches in seconds based on journalist profiles and past articles",
      color: "from-purple-500 to-blue-500"
    },
    {
      icon: BarChart3,
      title: "Smart Rules",
      description: "Automatically organize responses and follow-ups based on engagement metrics",
      color: "from-orange-500 to-red-500"
    },
    {
      icon: Users,
      title: "Business Integrations",
      description: "Connect seamlessly with Salesforce, HubSpot, and 50+ other platforms",
      color: "from-green-500 to-teal-500"
    },
    {
      icon: MailCheck,
      title: "AI Labels",
      description: "Intelligent categorization of pitches, replies, and media mentions",
      color: "from-pink-500 to-purple-500"
    }
  ];

  const testimonials = [
    {
      name: "Sarah Chen",
      role: "Comms Director, TechCorp",
      content: "MuckRack reduced our pitch creation time by 80%. The AI understands our voice perfectly.",
      rating: 5
    },
    {
      name: "Mike Rodriguez",
      role: "PR Agency Principal",
      content: "The smart follow-ups alone save our team 10+ hours per week. Worth every penny.",
      rating: 5
    },
    {
      name: "Emma Watson",
      role: "Founder, StartupPR",
      content: "Finally, a tool that grows with our agency. The insights are incredible.",
      rating: 5
    }
  ];

  return (
    <div className="min-h-screen bg-gradient-to-br from-pink-50 to-purple-50">
      {/* Navigation */}
      <nav className="fixed top-0 w-full bg-white/80 backdrop-blur-sm border-b border-gray-200 z-50">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="flex items-center justify-between h-16">
            <div className="flex items-center gap-2">
              <img 
                src="/muck-rack-logo.svg" 
                alt="Muck Rack" 
                className="h-8 w-auto"
                onError={(e) => {
                  const target = e.target as HTMLImageElement;
                  target.src = "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjMwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjx0ZXh0IHg9IjEwIiB5PSIyMCIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE2IiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0iIzFhMWEhYSI+TXVjayBSYWNrPC90ZXh0Pjwvc3ZnPg==";
                }}
              />
            </div>
            
            <div className="hidden md:flex items-center space-x-8">
              <a href="#features" className="text-gray-700 hover:text-purple-500 transition-colors">Features</a>
              <a href="#pricing" className="text-gray-700 hover:text-purple-500 transition-colors">Pricing</a>
              <a href="#testimonials" className="text-gray-700 hover:text-purple-500 transition-colors">Testimonials</a>
              <Button className="bg-purple-500 hover:bg-purple-600">Get Started</Button>
            </div>
          </div>
        </div>
      </nav>

      {/* Hero Section */}
      <section className="pt-20 pb-32 px-4">
        <div className="max-w-7xl mx-auto text-center">
          <motion.div
            initial={{ opacity: 0, y: 20 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ duration: 0.6 }}
          >
            <div className="inline-flex items-center gap-2 bg-gradient-to-r from-orange-100 to-yellow-100 px-4 py-2 rounded-full text-sm mb-8">
              <img src="https://cdn.vaetas.com/logos/gmail.svg" alt="Gmail" className="w-5 h-5" />
              <span>Native Gmail Integration • No Plugins Required</span>
            </div>
            
            <h1 className="text-4xl md:text-7xl font-bold mb-6 leading-tight">
              Write Better Pitches
              <span className="text-transparent bg-clip-text bg-gradient-to-r from-purple-500 to-pink-500"> 80% Faster</span>
              <br />
              in Gmail
            </h1>
            
            <p className="text-xl text-gray-600 mb-8 max-w-3xl mx-auto">
              MuckRack's AI helps you draft, send, and manage media outreach directly in Gmail. 
              Trusted by 10,000+ PR professionals to save 3+ hours daily.
            </p>
            
            <motion.div
              whileHover={{ scale: 1.05 }}
              transition={{ duration: 0.2 }}
            >
              <Button size="lg" className="bg-purple-500 hover:bg-purple-600 text-white px-8 py-3 text-lg">
                Start Free 14-Day Trial
                <ChevronRight className="ml-2 w-5 h-5" />
              </Button>
            </motion.div>
            
            <div className="mt-8 text-sm text-gray-500">
              No credit card required • Cancel anytime
            </div>
          </motion.div>
        </div>
      </section>

      {/* Three-Step Process */}
      <section className="py-20 px-4 bg-gradient-to-r from-orange-50 to-yellow-50">
        <div className="max-w-7xl mx-auto">
          <div className="text-center mb-16">
            <h2 className="text-3xl md:text-5xl font-bold mb-4">Start sending better pitches</h2>
            <p className="text-xl text-gray-600">Get set up in 5 minutes, start pitching instantly</p>
          </div>
          
          <div className="grid md:grid-cols-3 gap-8">
            {[
              { icon: Mail, title: "Connect Gmail", description: "Sign in with your Google account. No plugins or complex setup needed." },
              { icon: Sparkles, title: "Onboard your team", description: "Invite your team in 2 clicks. Share templates, analytics, and folders." },
              { icon: Award, title: "Start pitching", description: "Start using AI to write personalized pitches in seconds. See results immediately." }
            ].map((step, index) => (
              <motion.div
                key={index}
                initial={{ opacity: 0, y: 20 }}
                animate={{ opacity: 1, y: 0 }}
                transition={{ duration: 0.5, delay: index * 0.1 }}
                className="text-center"
              >
                <div className="w-16 h-16 bg-purple-500 rounded-full flex items-center justify-center mx-auto mb-4">
                  <step.icon className="w-8 h-8 text-white" />
                </div>
                <h3 className="text-xl font-bold mb-2">{index + 1}. {step.title}</h3>
                <p className="text-gray-600">{step.description}</p>
              </motion.div>
            ))}
          </div>
        </div>
      </section>

      {/* Features Section */}
      <section id="features" className="py-20 px-4">
        <div className="max-w-7xl mx-auto">
          <div className="text-center mb-16">
            <h2 className="text-3xl md:text-5xl font-bold mb-4">Write less, achieve more</h2>
            <p className="text-xl text-gray-600">AI-powered tools designed for modern PR teams</p>
          </div>
          
          <div className="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
            {features.map((feature, index) => (
              <motion.div
                key={index}
                initial={{ opacity: 0, y: 20 }}
                animate={{ opacity: 1, y: 0 }}
                transition={{ duration: 0.5, delay: index * 0.1 }}
                onHoverStart={() => setHoveredFeature(feature.title)}
                onHoverEnd={() => setHoveredFeature(null)}
              >
                <Card className={`p-6 h-full border-2 transition-all duration-300 cursor-pointer ${
                  hoveredFeature === feature.title ? 'border-purple-500 shadow-xl' : 'border-gray-200'
                }`}>
                  <div className={`w-12 h-12 rounded-lg bg-gradient-to-r ${feature.color} flex items-center justify-center mb-4`}>
                    <feature.icon className="w-6 h-6 text-white" />
                  </div>
                  <h3 className="text-lg font-bold mb-2">{feature.title}</h3>
                  <p className="text-gray-600 text-sm">{feature.description}</p>
                </Card>
              </motion.div>
            ))}
          </div>
        </div>
      </section>

      {/* Testimonials */}
      <section id="testimonials" className="py-20 px-4 bg-gradient-to-r from-pink-50 to-purple-50">
        <div className="max-w-7xl mx-auto">
          <div className="text-center mb-16">
            <h2 className="text-3xl md:text-5xl font-bold mb-4">Trusted by leading teams</h2>
            <p className="text-xl text-gray-600">See how PR professionals use MuckRack daily</p>
          </div>
          
          <div className="grid md:grid-cols-3 gap-8">
            {testimonials.map((testimonial, index) => (
              <motion.div
                key={index}
                initial={{ opacity: 0, y: 20 }}
                animate={{ opacity: 1, y: 0 }}
                transition={{ duration: 0.5, delay: index * 0.1 }}
              >
                <Card className="p-6">
                  <div className="flex mb-4">
                    {[...Array(testimonial.rating)].map((_, i) => (
                      <Star key={i} className="w-4 h-4 fill-yellow-400 text-yellow-400" />
                    ))}
                  </div>
                  <p className="text-gray-700 mb-4">"{testimonial.content}"</p>
                  <div>
                    <p className="font-bold">{testimonial.name}</p>
                    <p className="text-sm text-gray-600">{testimonial.role}</p>
                  </div>
                </Card>
              </motion.div>
            ))}
          </div>
        </div>
      </section>

      {/* Pricing */}
      <section id="pricing" className="py-20 px-4">
        <div className="max-w-7xl mx-auto">
          <div className="text-center mb-16">
            <h2 className="text-3xl md:text-5xl font-bold mb-4">Simple, transparent pricing</h2>
            <p className="text-xl text-gray-600">Start free. Upgrade anytime. Cancel anytime.</p>
          </div>
          
          <div className="grid md:grid-cols-3 gap-8 max-w-4xl mx-auto">
            <PricingCard
              plan="Starter"
              price="99"
              features={[
                "Gmail integration",
                "AI pitch drafts (50/month)",
                "Basic analytics",
                "Standard support"
              ]}
            />
            <PricingCard
              plan="Professional"
              price="249"
              features={[
                "Everything in Starter",
                "Unlimited AI drafts",
                "Advanced analytics",
                "Priority support",
                "Custom branding"
              ]}
              popular
            />
            <PricingCard
              plan="Agency"
              price="499"
              features={[
                "Everything in Professional",
                "Multi-team support",
                "White-label reports",
                "Dedicated success manager",
                "Custom integrations"
              ]}
            />
          </div>
          
          <div className="text-center mt-8">
            <Button variant="outline" className="text-lg">
              View Full Pricing Details
            </Button>
          </div>
        </div>
      </section>

      {/* Final CTA */}
      <section className="py-20 px-4 bg-gradient-to-r from-purple-600 to-pink-600">
        <div className="max-w-7xl mx-auto text-center">
          <motion.div
            initial={{ opacity: 0, y: 20 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ duration: 0.6 }}
          >
            <h2 className="text-3xl md:text-5xl font-bold text-white mb-4">
              Ready to transform your outreach?
            </h2>
            <p className="text-xl text-white/80 mb-8">
              Join 10,000+ PR professionals saving hours daily with MuckRack
            </p>
            
            <div className="flex flex-col sm:flex-row gap-4 justify-center items-center">
              <Input
                type="email"
                placeholder="Enter your email"
                value={email}
                onChange={(e) => setEmail(e.target.value)}
                className="max-w-sm bg-white border-0"
              />
              <Button size="lg" className="bg-white text-purple-600 hover:bg-gray-100">
                Start Free Trial
                <ChevronRight className="ml-2 w-5 h-5" />
              </Button>
            </div>
          </motion.div>
        </div>
      </section>

      {/* Footer */}
      <footer className="py-12 px-4 bg-gray-900 text-white">
        <div className="max-w-7xl mx-auto">
          <div className="flex justify-center mb-8">
            <DownloadLogo />
          </div>
          <div className="text-center text-gray-400">
            <p>&copy; 2024 MuckRack. All rights reserved.</p>
          </div>
        </div>
      </footer>
    </div>
  );
}